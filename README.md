# MuJoCo MPC 汽车仪表盘项目

## 项目信息

- **学号**: 232011177
- **姓名**: 张航
- **班级**: 计科2305班
- **完成日期**: 2025年12月23日

## 项目概述

本项目是基于 Google DeepMind 开源的 MuJoCo MPC 框架进行的深度二次开发，旨在构建一个高保真且交互性强的汽车仿真仪表盘系统。项目核心目标在于探索物理引擎与人机交互界面（HMI）的深度融合技术。在技术实现上，本项目摒弃了传统的外部图形库依赖，完全基于 MuJoCo 原生的 mjr 和 mjv 渲染接口进行底层开发 。通过深入解析 mjData 中的物理数据流，项目成功构建了一套包含自动变速箱逻辑、自适应驾驶模式切换以及动态油耗计算在内的完整车辆状态机。此外，项目还突破了单一视角的限制，利用多摄像机渲染技术实现了画中画小地图功能，并基于接触动力学原理开发了实时碰撞检测系统 。这不仅展示了车辆的基础行驶数据，更构建了一个具备环境感知能力的智能驾驶仿真终端


## 环境要求

- **操作系统**: Ubuntu 22.04 (WSL2)
- **编译器**: gcc 11.3.0
- **CMake**: 3.22.1
- **依赖库**: MuJoCo (项目内置), 标准 C++ 库

## 编译和运行

### 编译步骤

```bash
cd mujoco_mpc
mkdir -p build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
cmake --build . -j4


# ##运行  
mjpc 并加载简单的车辆任务场景
./bin/mjpc --mjcf=../mjpc/tasks/simple_car/task.xml


##功能说明

###已实现功能
[√] 速度表：实时显示车辆速度 (km/h)。

[√] 转速表：基于速度模拟的 RPM 显示，带有红线区抖动效果。

[√] 数字显示：精确显示剩余油量百分比、当前档位、驾驶模式。


###进阶与创新功能
[√] 小地图：实现了 Picture-in-Picture (画中画) 功能，提供车辆俯视追踪视角。


[√] 智能驾驶模式：ECO 模式：平缓驾驶时触发，油耗低。

			   SPORT 模式：当车速 >60km/h 或急加速时自动触发，油耗增加。


[√] 碰撞检测系统：实时监测车身底盘与环境的接触。发生碰撞时，屏幕中央弹出红色 "COLLISION DETECTED!" 警告框。


[√] 自动变速箱逻辑：实现了 P (驻车)、R (倒挡)、N (空挡) 及 1-5 档的前进自动换挡逻辑。


[√] 动态油耗系统：油量随速度和驾驶模式实时扣除，低油量 (<20%) 时，油量条自动由绿色变为红色预警。


文件说明
为了保证编译的稳定性并解决链接错误，本项目将核心逻辑集成到了主模拟循环中：

mjpc/simulate.cc: 核心代码文件。修改了 Simulate::Render() 函数，在 SwapBuffers 之前插入了 HUD 渲染逻辑、小地图摄像机控制逻辑以及物理数据计算逻辑。

mjpc/tasks/simple_car/simple_car.cc: 提供了基础的车辆控制和物理模型接口。

mjpc/tasks/simple_car/task.xml: 定义了车辆的几何体（用于碰撞检测的 chassis）和物理属性。
